{"version":3,"sources":["../src/mongodb-utils.js"],"names":["objectId","isObjectEmpty","queryObjectId","ObjectId","id","obj","check","val","trim","length","Object","keys","key","hasOwnProperty","call","args","_id"],"mappings":";;;;;;;;QAIgBA,Q,GAAAA,Q;QAIAC,a,GAAAA,a;QAoBAC,a,GAAAA,a;;AA5BhB;;;;;;IAEQC,Q,qBAAAA,Q;AAED,SAASH,QAAT,CAAmBI,EAAnB,EAAuB;AAC5B,SAAOD,SAASC,EAAT,CAAP;AACD;;AAEM,SAASH,aAAT,CAAwBI,GAAxB,EAA6B;AAClC,WAASC,KAAT,CAAgBC,GAAhB,EAAqB;AACnB;AACA,QAAI,CAACA,GAAD,IAAQA,IAAIC,IAAJ,KAAa,EAAzB,EAA6B,OAAO,IAAP;;AAE7B;AACA,QAAID,IAAIE,MAAJ,IAAcF,IAAIE,MAAJ,KAAe,CAAjC,EAAoC,OAAO,IAAP;AACpC,QAAIC,OAAOC,IAAP,CAAYJ,GAAZ,EAAiBE,MAAjB,KAA4B,CAAhC,EAAmC,OAAO,IAAP;AACpC;;AAED;AACA,OAAK,IAAIG,GAAT,IAAgBP,GAAhB,EAAqB;AACnB,QAAIQ,eAAeC,IAAf,CAAoBT,GAApB,EAAyBO,GAAzB,CAAJ,EAAmC;AACjC,aAAON,MAAMD,IAAIO,GAAJ,CAAN,CAAP;AACD;AACF;;AAED,SAAON,MAAMD,GAAN,CAAP;AACD;;AAEM,SAASH,aAAT,CAAwBa,IAAxB,EAA8B;AACnC,MAAId,cAAcc,IAAd,CAAJ,EAAyB,OAAO,EAAP;;AAEzB,SAAOA,KAAKC,GAAL,gBAAgBD,IAAhB,IAAsBC,KAAKhB,SAASe,KAAKC,GAAd,CAA3B,MAAkDhB,SAASe,IAAT,CAAzD;AACD","file":"mongodb-utils.js","sourcesContent":["import mongodb from 'mongodb';\n\nconst { ObjectId } = mongodb;\n\nexport function objectId (id) {\n  return ObjectId(id);\n}\n\nexport function isObjectEmpty (obj) {\n  function check (val) {\n    // checks if object is truthy or falsey\n    if (!val || val.trim === '') return true;\n\n    // checks objects length property (array)\n    if (val.length && val.length === 0) return true;\n    if (Object.keys(val).length === 0) return true;\n  }\n\n  // checks all object properties are empty\n  for (var key in obj) {\n    if (hasOwnProperty.call(obj, key)) {\n      return check(obj[key]);\n    }\n  }\n\n  return check(obj);\n}\n\nexport function queryObjectId (args) {\n  if (isObjectEmpty(args)) return {};\n\n  return args._id ? { ...args, _id: objectId(args._id) } : objectId(args);\n}\n"]}